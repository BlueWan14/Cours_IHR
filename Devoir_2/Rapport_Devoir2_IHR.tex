\documentclass[a4paper,11pt]{article}
\usepackage[francais]{babel}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage{geometry}
\usepackage{amsmath}
\usepackage{float}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{hyperref}
\usepackage{rotating}

\setcounter{secnumdepth}{0}
\hypersetup{colorlinks=true, linkcolor=black}
\geometry{margin=1in}

\begin{document}

\selectlanguage{french}

\begin{titlepage}
    \begin{center}
        % Logo de l'école en en-tête
        \includegraphics[width=5cm]{./img/uqac.png}\\[1cm]
        
        % Titre principal
        \vspace*{1cm} % Ajuster pour centrer verticalement
        {\Huge \textbf{Interaction Humain-Robot : Devoir 2}\\[0.5cm]}

        % Image de couverture (centrée en dessous du logo)
        \vspace*{1cm}
        \includegraphics[width=0.7\textwidth]{./img/image_IHR.png}\\[1cm]

        
        
        % Informations des auteurs
        \vspace{2cm}
        {\LARGE Constance ALOYAU, Erwan MAWART, Benjamin PELLIEUX}
        
        \vspace{0.5cm}
        {\large PELB28120100, MAWE14050200, ALOC25530200}
        
        % Date
        \vspace{2cm}
        {\Large \today}
        
        \vfill
    \end{center}
\end{titlepage}

\tableofcontents
\newpage

\section*{Introduction}
    % à refaire...
    Les vibrations dans un mécanisme robotique, lorsqu’il est manipulé par un opérateur humain, peuvent affecter significativement la qualité et la précision de la tâche réalisée. Nous étudions l'impact perceptuel de ces vibrations lorsqu’un opérateur applique une force à l’aide d’une poignée sur un capteur de force fixé à un robot à un degré de liberté...

\section{Énoncé 1 : Conception du modèle du mécanisme}
\subsection{Question 1.1}
\begin{figure}[h!]
    \centering
    \includegraphics[width=14cm]{./img/modele_humain-meca_robotique.png}
    \caption{Modèle du mécanisme robotique et de l'humain \label{fig:ModelMecaRobotHumain}}
\end{figure}

La \autoref{fig:ModelMecaRobotHumain} présente le mécanisme robotique que nous allons utiliser, où :
\begin{itemize}
    \item[$\bullet$] $M_R$ : masse de la charge \textit{[kg]}.
    \item[$\bullet$] $m_R$ : masse du système \textit{[kg]}.
    \item[$\bullet$] $K_B$ : constante de raideur des courroies \textit{[N/m]}.
    \item[$\bullet$] $C_B$ : coefficient d'amortissement des courroies \textit{[$N\cdot s/m$]}.
    \item[$\bullet$] $K_H$ : constante de raideur de l'humain\textit{[N/m]}.
    \item[$\bullet$] $C_H$ : coefficient d'amortissement de l'humain \textit{[$N\cdot s/m$]}.
    \item[$\bullet$] $C_R$ : coefficient de frottement \textit{[$N\cdot s/m$]}.
    \item[$\bullet$] $F$ : Force commandée par le système \textit{[N]}.
    \item[$\bullet$] $f_H$ : Force appliquée par l'humain \textit{[N]}.
    \item[$\bullet$] $x_1$ : position des moteurs \textit{[m]}.
    \item[$\bullet$] $x_2$ : position de la charge \textit{[m]}.
    \item[$\bullet$] $v_1$ : vitesse des moteurs \textit{[m/s]}, la dérivée de la position ($v_1 = \dot{x_1}$).
    \item[$\bullet$] $v_2$ : vitesse de la charge \textit{[m/s]}, la dérivée de la position ($v_2 = \dot{x_2}$).
\end{itemize}

Ainsi, on déduit les variables d'états ci-dessous.
\[
    X =
    \begin{bmatrix}
        x_1 \\
        x_2 \\
        v_1 \\
        v_2
    \end{bmatrix}
    =
    \begin{bmatrix}
        x_1 \\
        x_2 \\
        \dot{x_1} \\
        \dot{x_2}
    \end{bmatrix}
\]

En effectuant la somme des forces appliquées sur chaque masse, on obtient le système suivant.
\[
    \begin{cases}
        \sum F_{ext/m_R} = m_R\ddot{x_1} \\
        \sum F_{ext/M_R} = M_R\ddot{x_2} \\
    \end{cases}
    \Leftrightarrow
    \begin{cases}
        m_R\ddot{x_1} = F - K_B x_1 + K_B x_2 - C_B \dot{x_1} + C_B\dot{x_2} \\
        M_R\ddot{x_2} = K_B x_1 - K_B x_2 + C_B \dot{x_1} - C_B\dot{x_2} - C_R \dot{x_2} \\
    \end{cases}
\]

\begin{equation}
    \\ \Leftrightarrow
    \begin{cases}
        \ddot{x_1} = \frac{F - K_B x_1 + K_B x_2 - C_B \dot{x_1} + C_B \dot{x_2}}{m_R} \\
        \ddot{x_2} = \frac{K_B x_1 - K_B x_2 + C_B \dot{x_1} - C_B \dot{x_2} - C_R \dot{x_2}}{M_R}
    \end{cases}
    \label{eq:SommeDesForces}
\end{equation}

Grâce à celle-ci, on construit les deux équations de fonctionnement du système :

\begin{equation}
    \dot{X}=AX+BU
    \Leftrightarrow
    \begin{bmatrix}
        \dot{x_{1}}\\
        \dot{x_{2}}\\
        \ddot{x_{1}}\\
        \ddot{x_{2}}
    \end{bmatrix}
    =
    \begin{bmatrix}
        0 & 0 & 1 & 0\\
        0 & 0 & 0 & 1\\
        \frac{-K_{B}}{m_{R}} & \frac{K_{B}}{m_{R}} & \frac{-C_{B}}{m_{R}} & \frac{C_{B}}{m_{R}}\\
        \frac{K_{B}}{M_{R}} & \frac{-K_{B}}{M_{R}} & \frac{C_{B}}{M_{R}} & \frac{-(C_{B}+C_{R})}{M_{R}}\\
    \end{bmatrix}
    \begin{bmatrix}
        x_{1}\\
        x_{2}\\
        \dot{x_{1}}\\
        \dot{x_{2}}
    \end{bmatrix}
    +
    \begin{bmatrix}
        0\\
        0\\
        \frac{1}{m_{R}}\\
        0
    \end{bmatrix}
    \cdot F
    \label{eq:VarEtatXDot}
\end{equation}

\begin{equation}
    Y=CX+DU
    \Leftrightarrow
    Y=CX
    \Leftrightarrow
    \begin{bmatrix}
        x_{2}\\
        \dot{x_{1}}
    \end{bmatrix}
    =
    \begin{bmatrix}
        0 & 1 & 0 & 0\\
        0 & 0 & 1 & 0
    \end{bmatrix}
    \begin{bmatrix}
        x_{1}\\
        x_{2}\\
        \dot{x_{1}}\\
        \dot{x_{2}}
    \end{bmatrix}\\
    \label{eq:VarEtatY}
\end{equation}

L'\autoref{eq:VarEtatY} présente la sortie du système. Dans notre cas, on utilise $x_2$ (la position de la charge) et $v_1$ (la vitesse des moteurs) afin d'asservir notre système. Où $x_2$ permet à l'humain de corriger la trajectoire de la charge et $v_1$ d'asservir les moteurs.


\subsection{Question 1.2}
\begin{figure}[h!]
    \centering
    \includegraphics[width=16cm]{./img/SchemaBlocAvecObs.png}
    \caption{Commande du mécanisme robotique et humain avec observateur\label{fig:SchemaBlocAvecObs}}
\end{figure}

Un observateur est ajouté afin d'ajuster dynamiquement le gain correcteur $K_p$, qui est mis à jour selon la formule suivante :

\[
K_{p}(n+1) = K_{p}(n) \cdot \eta
\]

Où
\[
\eta =
\begin{cases}
    \eta_{\text{min}} & \text{si } \eta' \leq \eta_{\text{min}} \\
    \eta' & \text{si } \eta' > \eta_{\text{min}}
\end{cases}
\]

et

\[
\eta' =
\begin{cases}
    1 & \text{si } V \geq V_{\text{min}} \\
    0 & \text{si } V \geq V_{\text{max}} \\
    \frac{V_{\text{max}} - V}{V_{\text{max}} - V_{\text{min}}} & \text{sinon}
\end{cases}
\]

De plus,

\[
V =
\begin{cases}
    \lambda \sum_{i=1}^{q-1} \frac{\left| y_{1,i+1} - y_{1,i} \right|}{t_{1,i+1} - t_{1,i}} & \text{si } q \geq 2 \\
    0 & \text{si } q < 2
\end{cases}
\]

Avec $\eta_{\text{min}}$ une valeur définie proche de 0, $V_{\text{min}} = \frac{\lambda}{2}$, $V_{\text{max}} = V_{\text{min}} + \lambda$, $\lambda$ un coefficient d’amplitude, $q$ représentant le nombre d’extremums présents dans le signal, $y$ l’amplitude du signal correspondant à l'${i}^{\text{ème}}$ extremum, et $t$ le temps correspondant.

\subsection{Question 1.3}
On a : \\
$Den(s)=M_R T m_R^2 v \cdot s^6 + (M_R m_R^2 v + C_B T m_R^2 v + C_R T m_R^2 v + C_B M_R T m_R v + M_R T c m_R v) \cdot s^5 + (C_B m_R^2 v + C_R m_R^2 v + K_B T m_R^2 v + C_B M_R m_R v + K_p M_R m_R v + M_R c m_R v + C_B M_R T c v + C_B C_R T m_R v + K_B M_R T m_R v + C_B T c m_R v + C_R T c m_R v) \cdot s^4 + (K_B m_R^2 v + C_B M_R c v + C_B C_R m_R v + C_B K_p m_R v + K_p M_R c v + C_R K_p m_R v + K_B M_R m_R v + C_B c m_R v + C_R c m_R v + C_B C_R T c v + K_B M_R T c v + C_R K T m_R v + K_B T c m_R v) \cdot s^3 + (C_B C_R c v + C_B K_p c v + C_R K_p c v + K_B M_R c v + C_R K m_R v + K K_p m_R v + K c m_R v + C_R K T c v) \cdot s^2 + (C_B K_h K_p + C_R K c v + K K_p c v) \cdot s + K_B K_h K_p$
\\

\[
\begin{array}{|c|c c c c|}
    \hline
    s^n & a_n & a_{n-2} & a_{n-4} & \dots \\
    \hline
    s^{n-1} & a_{n-1} & a_{n-3} & a_{n-5} & \dots \\
    \hline
    s^{n-2} & b_{n-1} & b_{n-3} & b_{n-5} & \dots \\
    \hline
    s^{n-3} & c_{n-1} & c_{n-3} & c_{n-5} & \dots \\
    \hline
    \vdots & \vdots & \vdots & \vdots & \vdots \\
    \hline
    s^0 & h_{n-1} & h_{n-3} & h_{n-5} & \dots \\
    \hline
\end{array}
\]

où

\[
b_{n-1} = \frac{-1}{a_{n-1}}
\begin{vmatrix}
    a_n & a_{n-2} \\
    a_{n-1} & a_{n-3}
\end{vmatrix}
= \frac{a_{n-1} a_{n-2} - a_n a_{n-3}}{a_{n-1}}
\]

\[
b_{n-3} = \frac{-1}{a_{n-1}}
\begin{vmatrix}
    a_n & a_{n-4} \\
    a_{n-1} & a_{n-5}
\end{vmatrix}
\]

et

\[
c_{n-1} = \frac{-1}{b_{n-1}}
\begin{vmatrix}
    a_{n-1} & a_{n-3} \\
    b_{n-1} & b_{n-3}
\end{vmatrix}
\]

\[
c_{n-3} = \frac{-1}{b_{n-1}}
\begin{vmatrix}
    a_{n-1} & a_{n-5} \\
    b_{n-1} & b_{n-5}
\end{vmatrix}
\] etc.\\

Voir le fichier "calcRouthHurwitz.m" afin de voir le tableau. Ici, les valeurs qui vont nous intéresser sont :\\
$a_n = 50000\\
 a_{n-1} = 604000\\
 b_{n-1} = \frac{1350000*Kp + 652552000}{151}\\
 c_{n-1} =$ 

\begin{math}
    -\frac{444891200000 K_p - \left( 12800 K_p + 492628000 \right) \cdot \left( \frac{1350000 K_p}{151} + \frac{652552000}{151} \right) - 2000000 K_h K_p + 314960320000000}{\frac{1350000 K_p}{151} + \frac{652552000}{151}}
\end{math}\\
    $$d_{n-1} =$$
\begin{math}
    \frac{\left( \frac{1350000 K_p}{151} + \frac{652552000}{151} \right) \cdot \left( \left( \frac{1350000 K_p}{151} + \frac{652552000}{151} \right) \cdot \left( 800000 K_p + 40 K_h K_p + 80000000 \right) - 24160000000 K_h K_p + \left( \frac{111222800 K_p}{151} - \frac{500 K_h K_p}{151} + \frac{78740080000}{151} \right) \cdot \left( 444891200000 K_p - \left( 12800 K_p + 492628000 \right) \cdot \left( \frac{1350000 K_p}{151} + \frac{652552000}{151} \right) - 2000000 K_h K_p + 314960320000000 \right) \right) / \left( \frac{1350000 K_p}{151} + \frac{652552000}{151} \right)}{444891200000 K_p - \left( 12800 K_p + 492628000 \right) \cdot \left( \frac{1350000 K_p}{151} + \frac{652552000}{151} \right) - 2000000 K_h K_p + 314960320000000}
\end{math}\\
    $$e_{n-1} =$$
\begin{math}
    \frac{\left( \left( \left( \left( \left( \frac{1350000 K_p}{151} \right) + \frac{652552000}{151} \right) \cdot \left( 800000 K_p + 40 K_h K_p + 80000000 \right) - 24160000000 K_h K_p \right) \right) \cdot \left( \left( \frac{1350000 K_p}{151} + \frac{652552000}{151} \right) \cdot \left( 800000 K_p + 40 K_h K_p + 80000000 \right) - 24160000000 K_h K_p + \left( \frac{111222800 K_p}{151} - \frac{500 K_h K_p}{151} + \frac{78740080000}{151} \right) \cdot \left( 444891200000 K_p - \left( 12800 K_p + 492628000 \right) \cdot \left( \frac{1350000 K_p}{151} + \frac{652552000}{151} \right) - 2000000 K_h K_p + 314960320000000 \right) \right) \right)}{\left( 444891200000 K_p - \left( 12800 K_p + 492628000 \right) \cdot \left( \frac{1350000 K_p}{151} + \frac{652552000}{151} \right) - 2000000 K_h K_p + 314960320000000 \right) + \frac{40000 K_h K_p \cdot \left( 444891200000 K_p - \left( 12800 K_p + 492628000 \right) \cdot \left( \frac{1350000 K_p}{151} + \frac{652552000}{151} \right) - 2000000 K_h K_p + 314960320000000 \right)}{\frac{1350000 K_p}{151} + \frac{652552000}{151}}} {\left( \frac{1350000 K_p}{151} + \frac{652552000}{151} \right) \cdot \left( \left( \frac{1350000 K_p}{151} + \frac{652552000}{151} \right) \cdot \left( 800000 K_p + 40 K_h K_p + 80000000 \right) - 24160000000 K_h K_p + \left( \frac{111222800 K_p}{151} - \frac{500 K_h K_p}{151} + \frac{78740080000}{151} \right) \cdot \left( 444891200000 K_p - \left( 12800 K_p + 492628000 \right) \cdot \left( \frac{1350000 K_p}{151} + \frac{652552000}{151} \right) - 2000000 K_h K_p + 314960320000000 \right) \right)}
\end{math}\\

L'équation qui donne $K_p$ est :
\[
\sqrt{
\begin{aligned}
& 13500 K_h^2 K_p^4 + 5722790400 K_h K_p^4 - 1536192000000 K_p^4 + 25 K_h^3 K_p^3 + 364212158627392 K_h K_p^3 \\
& \quad - 1477369060 K_h^2 K_p^3 - 222772866812160000 K_p^3 + 58039881976304 K_h^2 K_p^2 + 7522346448958687680 K_h K_p^2 \\
& \quad - 279602932301062400000 K_p^2 + 3368250209611099328000 K_h K_p - 97036565037662080000000 K_p \\
& \quad - 7130246428367744000000000
\end{aligned}
}
\]



\section{Énoncé 2 : Simulation}
\subsection{Question 2.1}

\subsection{Question 2.2}

\subsection{Question 2.3}

\section{Annexe}
\subsection{Annexe 1 : Liste des valeurs fixes}
\begin{itemize}
    \item[$$] \makebox[5cm][l]{\makebox[.6cm][l]{$M_R$} = 500 $kg$} \textit{(masse de la charge)}
    \item[$$] \makebox[5cm][l]{\makebox[.6cm][l]{$m_R$} = 50 $kg$} \textit{(masse du système)}
    \item[$$] \makebox[5cm][l]{\makebox[.6cm][l]{$K_B$} = 40000 $N/m$} \textit{(constante de raideur des courroies)}
    \item[$$] \makebox[5cm][l]{\makebox[.6cm][l]{$C_B$} = 40 $N\cdot s/m$} \textit{(coefficient d'amortissement des courroies)}
    \item[$$] \makebox[5cm][l]{\makebox[.6cm][l]{$C_H$} = 23.45 $N\cdot s/m$} \textit{(coefficient d'amortissement de l'humain)}
    \item[$$] \makebox[5cm][l]{\makebox[.6cm][l]{$C_R$} = 100 $N\cdot s/m$} \textit{(coefficient de frottement)}
    \item[$$] \makebox[5cm][l]{\makebox[.6cm][l]{$T$} = 0.1 $s$} \textit{(temps d'échantillonnage)}
\end{itemize}


\subsection{Lien vers le Dépôt GitHub}
\url{https://github.com/BlueWan14/Cours_IHR/tree/main/Devoir_2}

\end{document}
